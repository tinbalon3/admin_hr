<div class="content">
  <h1>B·∫¢NG TIN C√îNG TY</h1>

  <mat-card *ngIf="loading" class="loading">
    <mat-card-content>
      <div class="spinner"></div>
      <p>ƒêang t·∫£i d·ªØ li·ªáu...</p>
    </mat-card-content>
  </mat-card>


  <div *ngIf="!loading && !error" class="main-container">
    <mat-card class="total-card">
      <mat-card-content>
        <h2>T·ªïng s·ªë nh√¢n vi√™n</h2>
        <div class="total-number">{{ totalEmployees }}</div>
      </mat-card-content>
    </mat-card>

    <div class="chart-container">
      <mat-card class="chart-card">
        <mat-card-header>
          <mat-card-title>C∆° s·ªü HCM</mat-card-title>
          <mat-card-subtitle>Ph√¢n b·ªë theo vai tr√≤</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <ngx-charts-pie-chart
            [view]="view"
            [scheme]="colorScheme"
            [results]="hcmData"
            [legend]="showLegend"
            [legendPosition]="legendPosition"
            [doughnut]="true"
            [labels]="true"
            [gradient]="true">
          </ngx-charts-pie-chart>
          <div class="location-total">
            T·ªïng s·ªë: {{ getLocationTotal(hcmData) }} nh√¢n vi√™n
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card class="chart-card">
        <mat-card-header>
          <mat-card-title>C∆° s·ªü ƒê√† N·∫µng</mat-card-title>
          <mat-card-subtitle>Ph√¢n b·ªë theo vai tr√≤</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <ngx-charts-pie-chart
            [view]="view"
            [scheme]="colorScheme"
            [results]="danangData"
            [legend]="showLegend"
            [legendPosition]="legendPosition"
            [doughnut]="true"
            [labels]="true"
            [gradient]="true">
          </ngx-charts-pie-chart>
          <div class="location-total">
            T·ªïng s·ªë: {{ getLocationTotal(danangData) }} nh√¢n vi√™n
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    <mat-card class="news-card">
      <mat-card-header>
        <mat-card-title>
          <span class="welcome-icon">üéâ</span> Ch√†o m·ª´ng th√†nh vi√™n m·ªõi
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <ng-container *ngIf="newUsers.length > 0">
          <p class="welcome-text">
            Th√†nh vi√™n m·ªõi gia nh·∫≠p trong 7 ng√†y qua:
          </p>
          <ul class="welcome-list">
            <li *ngFor="let user of newUsers" class="welcome-item">
              <div class="user-info">
                <span class="user-name">{{ user.full_name }}</span>
                <span class="user-location">{{ user.location === 'HCM' ? 'H·ªì Ch√≠ Minh' : 'ƒê√† N·∫µng' }}</span>
              </div>
              <span class="join-date">Ng√†y tham gia: {{ user.created_at | date:'dd/MM/yyyy' }}</span>
            </li>
          </ul>
        </ng-container>
        <div *ngIf="newUsers.length === 0" class="no-new-users">
          <span class="info-icon">‚ÑπÔ∏è</span>
          <p>Ch∆∞a c√≥ th√†nh vi√™n m·ªõi trong 7 ng√†y qua</p>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>