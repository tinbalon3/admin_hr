<div class="calendar-container p-4 bg-gray-100 rounded-lg shadow-md">
    <header class="calendar-header mb-4 flex items-center justify-between">
        <h2 class="text-2xl font-bold text-indigo-700">{{ currentMonth() }}</h2>
       
        <div class="flex items-center gap-3">
            <button 
                class="px-3 py-2 border bg-pink-500 border-indigo-500 text-white rounded-lg text-indigo-500 hover:bg-indigo-500 hover:text-white transition"
                (click)="submitSchedule()">
                ƒêƒÉng k√≠
            </button>
            <button 
                class="px-3 py-2 border border-indigo-500 rounded-lg text-indigo-500 hover:bg-indigo-500 hover:text-white transition"
                (click)="toCurrentMonth()">
                H√¥m nay
            </button>
            <div class="flex gap-2">
                <button 
                    class="px-3 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition"
                    (click)="prevMonth()">
                    Th√°ng tr∆∞·ªõc
                </button>
                <button 
                    class="px-3 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition"
                    (click)="nextMonth()">
                    Th√°ng sau
                </button>
            </div>
        </div>
    </header>

    <!-- Hi·ªÉn th·ªã c·∫£nh b√°o n·∫øu tu·∫ßn hi·ªán t·∫°i b·ªã kh√≥a -->
    <div *ngIf="isCurrentWeekLocked()" class="bg-red-500 text-white text-center p-2 rounded-lg mb-3">
        Tu·∫ßn n√†y ƒë√£ c√≥ l·ªãch ƒëƒÉng k√Ω, b·∫°n kh√¥ng th·ªÉ ch·ªânh s·ª≠a!
    </div>

    <div class="mt-2 grid grid-cols-7 gap-3"
        [ngClass]="isCurrentWeekLocked() ? 'opacity-50 pointer-events-none' : ''">
        
        <div *ngFor="let day of daysEnriched()"
            (click)="!day.isPast && selectDate(day.day)"
            [ngClass]="[
                'relative flex flex-col items-center justify-center rounded-lg p-3 h-24 transition',
                day.colStartClass,
                day.isToday ? 'bg-yellow-100 text-gray-800' : '',
                day.isPast ? 'bg-gray-200 text-gray-500 pointer-events-none' : '',
                isSelected(day.day) ? 'bg-green-200 text-gray-900' : '',
                !day.isToday && !day.isPast && !isSelected(day.day) ? 'bg-white' : '',
                'hover:ring-2 hover:ring-blue-400'
            ]">

            <!-- Icon n·ª≠a ng√†y ·ªü g√≥c tr√°i tr√™n -->
            <div 
                *ngIf="isSelected(day.day)"
                class="absolute top-2 left-2 w-5 h-5 flex items-center justify-center rounded-full text-xs font-semibold cursor-pointer transition"
                [ngClass]="isHalfDay(day.day) ? 'bg-green-700 text-white' : 'bg-blue-500 text-white'"
                (click)="toggleHalfDay(day.day); $event.stopPropagation()"
                [matTooltip]="isHalfDay(day.day) ? 'ƒê√£ ƒëƒÉng k√Ω l√†m n·ª≠a ng√†y' : 'ƒêƒÉng k√Ω l√†m n·ª≠a ng√†y'">
                üåì
            </div>

            <!-- Nh√£n "N·ª≠a Ng√†y" khi ƒë√£ ƒëƒÉng k√Ω n·ª≠a ng√†y -->
            <div *ngIf="isHalfDay(day.day)" 
                class="absolute bottom-2 px-3 py-1 bg-green-500 text-white text-sm font-bold rounded-full shadow-lg">
                N·ª≠a Ng√†y
            </div>

            <!-- Ng√†y -->
            <div class="absolute bottom-2 right-2 w-6 h-6 flex items-center justify-center bg-gray-200 text-gray-700 rounded-full text-xs font-semibold">
                {{ day.day | date: 'd' }}
            </div>
        </div>
    </div>
</div>
